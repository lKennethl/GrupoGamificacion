<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mundo de Aprendizaje - Bienvenida</title>
  <style>
    :root {
      --primary-color: #ff6b6b;
      --secondary-color: #4ecdc4;
      --accent-color: #45b7d1;
      --warning-color: #f9ca24;
      --success-color: #6c5ce7;
      --background-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --card-background: rgba(255, 255, 255, 0.95);
      --text-dark: #2c3e50;
      --text-light: #ffffff;  
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: var(--background-gradient);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
      position: relative;
      cursor: none; /* Oculta cursor nativo */
    }
    /* Cursor personalizado: pequeÃ±o punto */
    #custom-cursor {
      position: fixed;
      top: 0;
      left: 0;
      width: 10px;
      height: 10px;
      background: white;
      border-radius: 50%;
      pointer-events: none;
      transform: translate(-50%, -50%);
      z-index: 10000;
      box-shadow: 0 0 8px 2px rgba(78, 205, 196, 0.8);
      transition: background 0.2s ease;
    }
    /* Chispas con borde suave y sombra para buena visibilidad sin ser toscas */
    .sparkle {
      position: fixed;
      pointer-events: none;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      opacity: 1;
      z-index: 9999;
      mix-blend-mode: normal; /* Para que no se pierdan en fondo blanco */
      animation: sparkle-move 0.8s forwards;
      border: 1.2px solid rgba(255 255 255 / 0.85);
      box-shadow:
        0 0 6px 2px rgba(255 255 255 / 0.85),
        0 0 8px 4px currentColor;
      background-clip: padding-box;
    }
    /* Colores para chispas: tonos azules y verdes suaves y agradables */
    .sparkle.color-1 { background: radial-gradient(circle, #7fd8f7 0%, #4ecdc4 70%, transparent 90%); color: #4ecdc4; }
    .sparkle.color-2 { background: radial-gradient(circle, #a0e9d8 0%, #38b2ac 70%, transparent 90%); color: #38b2ac; }
    .sparkle.color-3 { background: radial-gradient(circle, #8ecae6 0%, #219ebc 70%, transparent 90%); color: #219ebc; }
    .sparkle.color-4 { background: radial-gradient(circle, #b2f7ef 0%, #2d6a4f 70%, transparent 90%); color: #2d6a4f; }
    .sparkle.color-5 { background: radial-gradient(circle, #9be7d1 0%, #40916c 70%, transparent 90%); color: #40916c; }

    @keyframes sparkle-move {
      0% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateY(-15px) scale(0.3);
        opacity: 0;
      }
    }

    /* Decoraciones flotantes */
    .floating-decoration {
      position: fixed;
      font-size: 2rem;
      opacity: 0.6;
      animation: float 6s ease-in-out infinite;
      pointer-events: none;
      z-index: 1;
    }
    .decoration-1 { top: 10%; left: 10%; animation-delay: 0s; }
    .decoration-2 { top: 20%; right: 15%; animation-delay: 1s; }
    .decoration-3 { bottom: 20%; left: 20%; animation-delay: 2s; }
    .decoration-4 { top: 60%; right: 10%; animation-delay: 3s; }
    .decoration-5 { bottom: 10%; right: 25%; animation-delay: 4s; }
    .decoration-6 { top: 40%; left: 5%; animation-delay: 5s; }
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(10deg); }
    }

    .login-container {
      background: var(--card-background);
      border-radius: 25px;
      padding: 3rem 2.5rem;
      box-shadow: var(--shadow);
      text-align: center;
      max-width: 450px;
      width: 90%;
      position: relative;
      z-index: 10;
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.3);
    }
    .welcome-title {
      color: var(--text-dark);
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      animation: bounceIn 1s ease-out;
    }
    .welcome-subtitle {
      color: var(--text-dark);
      font-size: 1.2rem;
      margin-bottom: 2rem;
      opacity: 0.8;
      animation: fadeInUp 1s ease-out 0.3s both;
    }
    .form-toggle {
      display: flex;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 15px;
      margin-bottom: 2rem;
      overflow: hidden;
      animation: fadeInUp 1s ease-out 0.6s both;
    }
    .toggle-btn {
      flex: 1;
      padding: 1rem;
      background: transparent;
      border: none;
      font-family: inherit;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      color: var(--text-dark);
    }
    .toggle-btn.active {
      background: var(--primary-color);
      color: var(--text-light);
      transform: scale(1.05);
    }
    .form-section {
      display: none;
      animation: fadeInUp 0.5s ease-out;
    }
    .form-section.active { display: block; }
    .input-group {
      margin-bottom: 1.5rem;
      text-align: left;
    }
    .input-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: var(--text-dark);
      font-weight: bold;
      font-size: 1rem;
    }
    .input-group input, .input-group select {
      width: 100%;
      padding: 1rem;
            border: 2px solid rgba(0, 0, 0, 0.1);
      border-radius: 15px;
      font-size: 1rem;
      font-family: inherit;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.8);
    }
    .input-group input:focus, .input-group select:focus {
      outline: none;
      border-color: var(--accent-color);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(69, 183, 209, 0.3);
    }
    .action-button {
      width: 100%;
      padding: 1.2rem 2rem;
      font-size: 1.3rem;
      font-weight: bold;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: inherit;
      margin-bottom: 1rem;
      position: relative;
      overflow: hidden;
    }
    .login-btn {
      background: linear-gradient(45deg, var(--accent-color), var(--secondary-color));
      color: var(--text-light);
    }
    .register-btn {
      background: linear-gradient(45deg, var(--primary-color), var(--warning-color));
      color: var(--text-light);
    }
    .action-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    }
    .action-button:active { transform: translateY(-1px); }
    .separator {
      display: flex;
      align-items: center;
      margin: 1.5rem 0;
      opacity: 0.6;
    }
    .separator::before,
    .separator::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--text-dark);
    }
    .separator span {
      padding: 0 1rem;
      color: var(--text-dark);
      font-weight: bold;
    }
    .message {
      padding: 1rem;
      border-radius: 10px;
      margin-bottom: 1rem;
      font-weight: bold;
      display: none;
    }
    .message.error {
      background: rgba(255, 107, 107, 0.2);
      color: #e74c3c;
      border: 2px solid rgba(231, 76, 60, 0.3);
    }
    .message.success {
      background: rgba(46, 204, 113, 0.2);
      color: #27ae60;
      border: 2px solid rgba(39, 174, 96, 0.3);
    }
    @keyframes bounceIn {
      0% { transform: scale(0.3); opacity: 0; }
      50% { transform: scale(1.05); }
      70% { transform: scale(0.9); }
      100% { transform: scale(1); opacity: 1; }
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @media (max-width: 480px) {
      .login-container { padding: 2rem 1.5rem; margin: 1rem; }
      .welcome-title { font-size: 2rem; }
      .welcome-subtitle { font-size: 1rem; }
      .floating-decoration { font-size: 1.5rem; }
      .caricatura-container { width: 100px; height: 100px; }
    }
    .loading {
      display: none;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
      margin-left: 10px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .caricatura-container {
      width: 120px;
      height: 120px;
      margin: 0 auto 2rem auto;
      position: relative;
      animation: fadeInUp 1s ease-out 0.4s both;
    }
    .caricatura-svg {
      width: 100%;
      height: 100%;
      transition: transform 0.3s ease;
      user-select: none;
      pointer-events: none;
      filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));
    }
    @keyframes blink {
      0%, 90%, 100% { transform: scaleY(1); }
      95% { transform: scaleY(0.1); }
    }
    .eyes-open {
      animation: blink 3s infinite;
    }
    .eyes-closed {
      animation: none;
    }
    #passwordStrength {
      font-weight: bold;
      margin-top: 0.3rem;
      display: block;
      min-height: 1.2em;
    }
  </style>
</head>
<body>
  <!-- Cursor personalizado -->
  <div id="custom-cursor"></div>

  <!-- Decoraciones flotantes -->
  <div class="floating-decoration decoration-1">ðŸŒŸ</div>
  <div class="floating-decoration decoration-2">ðŸ“š</div>
  <div class="floating-decoration decoration-3">ðŸŽ¨</div>
  <div class="floating-decoration decoration-4">ðŸŽµ</div>
  <div class="floating-decoration decoration-5">ðŸš€</div>
  <div class="floating-decoration decoration-6">âœ¨</div>

  <!-- Container principal -->
  <div class="login-container">
    <h1 class="welcome-title">Â¡Bienvenido!</h1>
    <p class="welcome-subtitle">Mundo de Aprendizaje para 1Âº a 6Âº de Primaria</p>

    <!-- Caricatura animada SVG -->
    <div class="caricatura-container">
      <svg id="caricatura" class="caricatura-svg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
        <circle cx="100" cy="100" r="80" fill="#FFD93D" stroke="#FFA500" stroke-width="3"/>
        <circle cx="70" cy="110" r="12" fill="#FFB6C1" opacity="0.6"/>
        <circle cx="130" cy="110" r="12" fill="#FFB6C1" opacity="0.6"/>
        <g id="eyes-open" class="eyes-open">
          <ellipse cx="80" cy="85" rx="12" ry="15" fill="white"/>
          <ellipse cx="120" cy="85" rx="12" ry="15" fill="white"/>
          <circle id="pupil-left" cx="80" cy="85" r="6" fill="#333"/>
          <circle id="pupil-right" cx="120" cy="85" r="6" fill="#333"/>
          <circle cx="82" cy="82" r="2" fill="white"/>
          <circle cx="122" cy="82" r="2" fill="white"/>
        </g>
        <g id="eyes-closed" style="display: none;">
          <path d="M 68 85 Q 80 80 92 85" stroke="#333" stroke-width="3" fill="none" stroke-linecap="round"/>
          <path d="M 108 85 Q 120 80 132 85" stroke="#333" stroke-width="3" fill="none" stroke-linecap="round"/>
        </g>
        <path d="M 68 70 Q 80 65 92 70" stroke="#8B4513" stroke-width="4" fill="none" stroke-linecap="round"/>
        <path d="M 108 70 Q 120 65 132 70" stroke="#8B4513" stroke-width="4" fill="none" stroke-linecap="round"/>
        <ellipse cx="100" cy="100" rx="4" ry="6" fill="#FFB347"/>
        <path id="mouth" d="M 80 125 Q 100 140 120 125" stroke="#333" stroke-width="4" fill="none" stroke-linecap="round"/>
        <path d="M 40 80 Q 50 30 100 35 Q 150 30 160 80" fill="#8B4513"/>
        <circle cx="60" cy="50" r="8" fill="#8B4513"/>
        <circle cx="100" cy="45" r="10" fill="#8B4513"/>
        <circle cx="140" cy="50" r="8" fill="#8B4513"/>
      </svg>
    </div>

    <!-- Mensaje de estado -->
    <div id="message" class="message"></div>

    <!-- Toggle entre Login y Registro -->
    <div class="form-toggle">
      <button class="toggle-btn active" onclick="showLogin()" type="button">Ingresar</button>
      <button class="toggle-btn" onclick="showRegister()" type="button">Registrarse</button>
    </div>

    <!-- Formulario de Login -->
    <div id="loginForm" class="form-section active">
      <form id="formLogin" novalidate>
        <div class="input-group">
          <label for="loginUsername">Usuario o Email:</label>
          <input type="text" id="loginUsername" name="usernameOrEmail" required placeholder="Ingresa tu usuario o email" autocomplete="username" />
        </div>
        <div class="input-group">
          <label for="loginPassword">ContraseÃ±a:</label>
          <input type="password" id="loginPassword" name="password" required placeholder="Ingresa tu contraseÃ±a" autocomplete="current-password" />
        </div>
        <button type="submit" class="action-button login-btn">
          Ingresar al Mundo
          <div class="loading" id="loginLoading" aria-hidden="true"></div>
        </button>
      </form>

      <!-- Recuperar cuenta login -->
      <button type="button" class="action-button" style="background: #f39c12; color: white; margin-top: 0;" onclick="toggleRecover('login')">
        Â¿Olvidaste tu contraseÃ±a?
      </button>
      <form id="recoverLoginForm" class="form-section" style="margin-top: 1rem; display: none;">
        <div class="input-group">
          <label for="recoverLoginEmail">Ingresa tu email para recuperar cuenta:</label>
          <input type="email" id="recoverLoginEmail" name="recoverEmail" placeholder="tu@email.com" required />
        </div>
        <button type="submit" class="action-button" style="background: #f39c12; color: white;">
          Enviar enlace de recuperaciÃ³n
        </button>
      </form>
    </div>

    <!-- Formulario de Registro -->
    <div id="registerForm" class="form-section">
      <form id="formRegister" novalidate>
        <div class="input-group">
          <label for="registerName">Nombre Completo:</label>
          <input type="text" id="registerName" name="nombre" required placeholder="Tu nombre completo" autocomplete="name" />
        </div>
        <div class="input-group">
          <label for="registerUsername">Usuario:</label>
          <input type="text" id="registerUsername" name="usuario" required placeholder="Elige un nombre de usuario" autocomplete="username" />
        </div>
        <div class="input-group">
          <label for="registerEmail">Email:</label>
          <input type="email" id="registerEmail" name="correo" required placeholder="tu@email.com" autocomplete="email" />
        </div>
        <div class="input-group">
          <label for="registerPassword">ContraseÃ±a:</label>
          <input type="password" id="registerPassword" name="contraseÃ±a" required placeholder="Crea una contraseÃ±a segura" autocomplete="new-password" />
          <small id="passwordStrength" aria-live="polite"></small>
        </div>
        <div class="input-group">
          <label for="registerCategory">Seleccionar categorÃ­a:</label>
          <select id="registerCategory" name="tipo_usuario" required>
            <option value="">Seleccionar categorÃ­a</option>
            <option value="docente">Docente</option>
            <option value="alumno">Alumno</option>
          </select>
        </div>
        <button type="submit" class="action-button register-btn">
          Crear Cuenta
          <div class="loading" id="registerLoading" aria-hidden="true"></div>
        </button>
      </form>
    </div>
  </div>

  <script>
    // Mostrar mensaje
    function showMessage(text, type = 'error') {
      const messageDiv = document.getElementById('message');
      messageDiv.textContent = text;
      messageDiv.className = 'message ' + type;
      messageDiv.style.display = 'block';
    }

    // Limpiar mensajes
    function clearMessages() {
      const messageDiv = document.getElementById('message');
      messageDiv.textContent = '';
      messageDiv.style.display = 'none';
      messageDiv.className = 'message';
    }

    // Alternar formularios
    function showLogin() {
      document.getElementById('loginForm').classList.add('active');
      document.getElementById('registerForm').classList.remove('active');
      const toggleBtns = document.querySelectorAll('.toggle-btn');
      toggleBtns[0].classList.add('active');
      toggleBtns[1].classList.remove('active');
      clearMessages();
    }
    function showRegister() {
      document.getElementById('loginForm').classList.remove('active');
      document.getElementById('registerForm').classList.add('active');
      const toggleBtns = document.querySelectorAll('.toggle-btn');
      toggleBtns[0].classList.remove('active');
      toggleBtns[1].classList.add('active');
      clearMessages();
    }
    window.showLogin = showLogin;
    window.showRegister = showRegister;

    // Evaluar fuerza contraseÃ±a
    const passwordInput = document.getElementById('registerPassword');
    const passwordStrengthText = document.getElementById('passwordStrength');

    passwordInput.addEventListener('input', () => {
      const val = passwordInput.value;
      const strength = getPasswordStrength(val);
      passwordStrengthText.textContent = strength.text;
      passwordStrengthText.style.color = strength.color;
    });

    function getPasswordStrength(password) {
      let score = 0;
      if (password.length >= 8) score++;
      if (/[A-Z]/.test(password)) score++;
      if (/[a-z]/.test(password)) score++;
      if (/\d/.test(password)) score++;
      if (/[\W_]/.test(password)) score++;

      if (score <= 2) return { text: 'ContraseÃ±a dÃ©bil', color: '#e74c3c' };
      if (score === 3) return { text: 'ContraseÃ±a media', color: '#f39c12' };
      if (score >= 4) return { text: 'ContraseÃ±a fuerte', color: '#2ecc71' };
      return { text: '', color: '#000' };
    }

    // URL base backend
    const API_BASE = 'http://localhost:3000';

    // Login con backend
    document.getElementById('formLogin').addEventListener('submit', async (e) => {
      e.preventDefault();
      clearMessages();

      const usernameOrEmail = document.getElementById('loginUsername').value.trim();
      const password = document.getElementById('loginPassword').value;

      if (!usernameOrEmail || !password) {
        showMessage('Por favor, completa todos los campos.', 'error');
        return;
      }

      try {
        const res = await fetch(`${API_BASE}/login`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ usernameOrEmail, password }),
        });
        const data = await res.json();
        if (!res.ok) {
          showMessage(data.error || 'Error en el login.', 'error');
          return;
        }
        showMessage(data.message, 'success');
        setTimeout(() => {
          localStorage.setItem('token', data.token);
          window.location.href = 'intro.html';
        }, 1000);
      } catch (err) {
        showMessage('Error de conexiÃ³n con el servidor.', 'error');
      }
    });

    // Registro con backend
    document.getElementById('formRegister').addEventListener('submit', async (e) => {
      e.preventDefault();
      clearMessages();

      const nombre = document.getElementById('registerName').value.trim();
      const usuario = document.getElementById('registerUsername').value.trim();
      const correo = document.getElementById('registerEmail').value.trim();
      const contraseÃ±a = document.getElementById('registerPassword').value;
      const tipo_usuario = document.getElementById('registerCategory').value;

      if (!nombre || !usuario || !correo || !contraseÃ±a || !tipo_usuario) {
        showMessage('Por favor, completa todos los campos.', 'error');
        return;
      }

      const strength = getPasswordStrength(contraseÃ±a);
      if (strength.text === 'ContraseÃ±a dÃ©bil') {
        showMessage('La contraseÃ±a es demasiado dÃ©bil. Usa mayÃºsculas, nÃºmeros y sÃ­mbolos.', 'error');
        return;
      }

      try {
        const bodyData = {
          nombre,
          usuario,
          correo,
          contraseÃ±a,
          tipo_usuario
        };

        const res = await fetch(`${API_BASE}/register`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(bodyData),
        });

        const data = await res.json();
        if (!res.ok) {
          showMessage(data.error || 'Error en el registro.', 'error');
          return;
        }
        showMessage(data.message, 'success');
        setTimeout(() => {
          window.location.href = 'Seleccion de Personajes.html';
        }, 1500);
      } catch (err) {
        showMessage('Error de conexiÃ³n con el servidor.', 'error');
      }
    });

        // Recuperar contraseÃ±a login
    document.getElementById('recoverLoginForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      clearMessages();
      const email = document.getElementById('recoverLoginEmail').value.trim();
      if (!email) {
        showMessage('Por favor, ingresa un email vÃ¡lido para recuperar la cuenta.', 'error');
        return;
      }
      try {
        const res = await fetch(`${API_BASE}/recover`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email }),
        });
        const data = await res.json();
        if (!res.ok) {
          showMessage(data.error || 'Error en la recuperaciÃ³n.', 'error');
          return;
        }
        showMessage(data.message, 'success');
        setTimeout(() => {
          document.getElementById('recoverLoginForm').style.display = 'none';
        }, 3000);
      } catch (err) {
        showMessage('Error de conexiÃ³n con el servidor.', 'error');
      }
    });

    // Mostrar/ocultar formulario de recuperaciÃ³n
    function toggleRecover(formType) {
      const recoverForm = document.getElementById(`recover${capitalize(formType)}Form`);
      if (recoverForm.style.display === 'block') {
        recoverForm.style.display = 'none';
      } else {
        recoverForm.style.display = 'block';
      }
    }

    function capitalize(str) {
      return str.charAt(0).toUpperCase() + str.slice(1);
    }

    // Caricatura sigue cursor
    document.addEventListener('mousemove', function(e) {
      const svg = document.getElementById('caricatura');
      if (!svg) return;
      const pupilLeft = svg.getElementById('pupil-left');
      const pupilRight = svg.getElementById('pupil-right');
      if (!pupilLeft || !pupilRight) return;
      const rect = svg.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      function clamp(val, min, max) { return Math.max(min, Math.min(max, val)); }
      pupilLeft.setAttribute('cx', clamp(80 + (x - 100) / 20, 74, 86));
      pupilLeft.setAttribute('cy', clamp(85 + (y - 100) / 20, 80, 90));
      pupilRight.setAttribute('cx', clamp(120 + (x - 100) / 20, 114, 126));
      pupilRight.setAttribute('cy', clamp(85 + (y - 100) / 20, 80, 90));
    });

    // Caricatura cierra ojos al escribir contraseÃ±a
    function setCaricaturaListeners(inputId) {
      const input = document.getElementById(inputId);
      if (!input) return;
      input.addEventListener('focus', function() {
        document.getElementById('eyes-open').style.display = 'none';
        document.getElementById('eyes-closed').style.display = 'inline';
      });
      input.addEventListener('blur', function() {
        document.getElementById('eyes-open').style.display = 'inline';
        document.getElementById('eyes-closed').style.display = 'none';
      });
    }
    setCaricaturaListeners('loginPassword');
    setCaricaturaListeners('registerPassword');

    // Cursor personalizado y chispas multicolores
    const cursor = document.getElementById('custom-cursor');
    const sparkleColors = ['color-1', 'color-2', 'color-3', 'color-4', 'color-5'];

    document.addEventListener('mousemove', e => {
      cursor.style.left = e.clientX + 'px';
      cursor.style.top = e.clientY + 'px';
      createSparkle(e.clientX, e.clientY);
    });

    function createSparkle(x, y) {
      const sparkle = document.createElement('div');
      sparkle.classList.add('sparkle');
      const colorClass = sparkleColors[Math.floor(Math.random() * sparkleColors.length)];
      sparkle.classList.add(colorClass);
      sparkle.style.left = (x + (Math.random() * 10 - 5)) + 'px';
      sparkle.style.top = (y + (Math.random() * 10 - 5)) + 'px';
      document.body.appendChild(sparkle);
      sparkle.addEventListener('animationend', () => {
        sparkle.remove();
      });
    }
  </script>
</body>
</html>